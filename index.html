<script>
  let usedNames = JSON.parse(localStorage.getItem("usedNames")) || [];

  function checkName() {
    let name = document.getElementById("nameInput").value.trim().toLowerCase();
    let result = document.getElementById("result");

    if (name === "") {
      result.innerHTML = "âš ï¸ Vui lÃ²ng nháº­p tÃªn!";
      return;
    }

    if (usedNames.includes(name)) {
      result.innerHTML = "âŒ TÃªn nÃ y Ä‘Ã£ má»Ÿ quÃ  rá»“i!";
      return;
    }

    // Hiá»‡u á»©ng Ä‘ang random
    let count = 0;
    result.innerHTML = "ğŸ² Äang random.";
    
    let loading = setInterval(() => {
      count++;
      result.innerHTML = "ğŸ² Äang random" + ".".repeat(count % 4);
    }, 300);

    // Sau 3 giÃ¢y má»›i ra káº¿t quáº£
    setTimeout(() => {
      clearInterval(loading);

      usedNames.push(name);
      localStorage.setItem("usedNames", JSON.stringify(usedNames));

      if (name === "lam") {
        result.innerHTML = "ğŸ‰ CHÃšC Má»ªNG! Báº¡n Ä‘Ã£ trÃºng quÃ  ğŸğŸ’–";

        confetti({
          particleCount: 200,
          spread: 120,
          origin: { y: 0.6 }
        });

      } else {
        result.innerHTML = "ğŸ˜¢ Ráº¥t tiáº¿c, báº¡n khÃ´ng trÃºng!";
      }

    }, 3000);
  }
</script>
